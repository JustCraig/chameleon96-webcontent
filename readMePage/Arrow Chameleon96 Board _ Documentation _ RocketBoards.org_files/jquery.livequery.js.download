(function(e){e.extend(e.fn,{livequery:function(t,u){var i=this,r;e.each(n.queries,function(e,n){if(i.selector==n.selector&&i.context==n.context&&(!t||t.$lqguid==n.fn.$lqguid)&&(!u||u.$lqguid==n.fn2.$lqguid))return(r=n)&&false});r=r||new n(i.selector,i.context,t,u);r.stopped=false;r.run();return i},expire:function(t,u){var i=this;e.each(n.queries,function(e,r){if(i.selector==r.selector&&i.context==r.context&&(!t||t.$lqguid==r.fn.$lqguid)&&(!u||u.$lqguid==r.fn2.$lqguid)&&!i.stopped)n.stop(r.id)});return i}});var n=e.livequery=function(t,u,i,r){var o=this;o.selector=t;o.context=u;o.fn=i;o.fn2=r;o.elements=e([]);o.stopped=false;o.id=n.queries.push(o)-1;i.$lqguid=i.$lqguid||n.guid++;if(r)r.$lqguid=r.$lqguid||n.guid++;return o};n.prototype={stop:function(){var n=this;if(n.stopped)return;if(n.fn2)n.elements.each(n.fn2);n.elements=e([]);n.stopped=true},run:function(){var n=this;if(n.stopped)return;var t=n.elements,u=e(n.selector,n.context),i=u.not(t),r=t.not(u);n.elements=u;i.each(n.fn);if(n.fn2)r.each(n.fn2)}};e.extend(n,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(n.running&&n.queue.length){var e=n.queue.length;while(e--)n.queries[n.queue.shift()].run()}},pause:function(){n.running=false},play:function(){n.running=true;n.run()},registerPlugin:function(){e.each(arguments,function(t,u){if(!e.fn[u])return;var i=e.fn[u];e.fn[u]=function(){var e=i.apply(this,arguments);n.run();return e}})},run:function(t){if(t!=undefined){if(e.inArray(t,n.queue)<0)n.queue.push(t)}else e.each(n.queries,function(t){if(e.inArray(t,n.queue)<0)n.queue.push(t)});if(n.timeout)clearTimeout(n.timeout);n.timeout=setTimeout(n.checkQueue,20)},stop:function(t){if(t!=undefined)n.queries[t].stop();else e.each(n.queries,n.prototype.stop)}});n.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp");e(function(){n.play()})})(jQuery);