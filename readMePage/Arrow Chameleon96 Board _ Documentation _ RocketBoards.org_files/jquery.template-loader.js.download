(function(e){"use strict";var n={};function t(){var e=(new Date).getTime().toString(32),n;for(n=0;n<5;n++){e+=Math.floor(Math.random()*65535).toString(32)}return"tmpl_"+e}e.loadTemplate=function(r,o){o=o||{};if(typeof r==="string"){o.url=r}else if(typeof r==="object"){o=r}if(typeof o.url==="undefined"){throw"ERROR: no url specified in loadTemplate"}o.name=o.name||o.url||t();var u=n[o.url];if(typeof u==="undefined"){n[o.url]=u=e.Deferred(function(t){var r=e.templates[o.name];if(typeof r!=="undefined"&&!o.force){t.resolve(r)}else{e.log("loading template from ",o.url);e.ajax({url:o.url}).then(function(u,f,l){n[o.url]=undefined;r=e.templates(o.name,u);t.resolve(r);return true},function(e,r,u){n[o.url]=undefined;t.reject(e);return false})}}).promise()}return u};e.fn.loadTemplate=function(n,t){return this.each(function(){var r=e(this);e.loadTemplate(n).done(function(e){r.html(e.render(t))})})}})(jQuery);