(function(){var e=0,t=[],i={},n={},r={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},a=/[<>&\"\']/g,o,s=window.setTimeout,f={},l;function u(){this.returnValue=false}function c(){this.cancelBubble=true}(function(e){var t=e.split(/,/),i,r,a;for(i=0;i<t.length;i+=2){a=t[i+1].split(/ /);for(r=0;r<a.length;r++){n[a[r]]=t[i]}}})("application/msword,doc dot,"+"application/pdf,pdf,"+"application/pgp-signature,pgp,"+"application/postscript,ps ai eps,"+"application/rtf,rtf,"+"application/vnd.ms-excel,xls xlb,"+"application/vnd.ms-powerpoint,ppt pps pot,"+"application/zip,zip,"+"application/x-shockwave-flash,swf swfl,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,"+"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,"+"application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,"+"application/vnd.openxmlformats-officedocument.presentationml.template,potx,"+"application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,"+"application/x-javascript,js,"+"application/json,json,"+"audio/mpeg,mpga mpega mp2 mp3,"+"audio/x-wav,wav,"+"audio/mp4,m4a,"+"image/bmp,bmp,"+"image/gif,gif,"+"image/jpeg,jpeg jpg jpe,"+"image/photoshop,psd,"+"image/png,png,"+"image/svg+xml,svg svgz,"+"image/tiff,tiff tif,"+"text/plain,asc txt text diff log,"+"text/html,htm html xhtml,"+"text/css,css,"+"text/csv,csv,"+"text/rtf,rtf,"+"video/mpeg,mpeg mpg mpe,"+"video/quicktime,qt mov,"+"video/mp4,mp4,"+"video/x-m4v,m4v,"+"video/x-flv,flv,"+"video/x-ms-wmv,wmv,"+"video/avi,avi,"+"video/webm,webm,"+"video/vnd.rn-realvideo,rv,"+"application/vnd.oasis.opendocument.formula-template,otf,"+"application/octet-stream,exe");var p={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:n,ua:function(){var e=navigator,t=e.userAgent,i=e.vendor,n,r,a;n=/WebKit/.test(t);a=n&&i.indexOf("Apple")!==-1;r=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,ie:!n&&!r&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),webkit:n,gecko:!n&&/Gecko/.test(t),safari:a,opera:!!r}}(),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){p.each(arguments,function(t,i){if(i>0){p.each(t,function(t,i){e[i]=t})}});return e},cleanName:function(e){var t,i;i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(t=0;t<i.length;t+=2){e=e.replace(i[t],i[t+1])}e=e.replace(/\s+/g,"_");e=e.replace(/[^a-z0-9_\-\.]+/gi,"");return e},addRuntime:function(e,i){i.name=e;t[e]=i;t.push(i);return i},guid:function(){var t=(new Date).getTime().toString(32),i;for(i=0;i<5;i++){t+=Math.floor(Math.random()*65535).toString(32)}return(p.guidPrefix||"p")+t+(e++).toString(32)},buildUrl:function(e,t){var i="";p.each(t,function(e,t){i+=(i?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)});if(i){e+=(e.indexOf("?")>0?"&":"?")+i}return e},each:function(e,t){var i,n,r;if(e){i=e.length;if(i===o){for(n in e){if(e.hasOwnProperty(n)){if(t(e[n],n)===false){return}}}}else{for(r=0;r<i;r++){if(t(e[r],r)===false){return}}}}},formatSize:function(e){if(e===o||/\D/.test(e)){return p.translate("N/A")}if(e>1073741824){return Math.round(e/1073741824,1)+" GB"}if(e>1048576){return Math.round(e/1048576,1)+" MB"}if(e>1024){return Math.round(e/1024,1)+" KB"}return e+" b"},getPos:function(e,t){var i=0,n=0,r,a=document,o,s;e=e;t=t||a.body;function f(e){var t,i,n=0,r=0;if(e){i=e.getBoundingClientRect();t=a.compatMode==="CSS1Compat"?a.documentElement:a.body;n=i.left+t.scrollLeft;r=i.top+t.scrollTop}return{x:n,y:r}}if(e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&a.documentMode<8){o=f(e);s=f(t);return{x:o.x-s.x,y:o.y-s.y}}r=e;while(r&&r!=t&&r.nodeType){i+=r.offsetLeft||0;n+=r.offsetTop||0;r=r.offsetParent}r=e.parentNode;while(r&&r!=t&&r.nodeType){i-=r.scrollLeft||0;n-=r.scrollTop||0;r=r.parentNode}return{x:i,y:n}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;if(typeof e=="string"){e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,""));t=e[2];e=+e[1];if(t=="g"){e*=1073741824}if(t=="m"){e*=1048576}if(t=="k"){e*=1024}}return e},xmlEncode:function(e){return e?(""+e).replace(a,function(e){return r[e]?"&"+r[e]+";":e}):e},toArray:function(e){var t,i=[];for(t=0;t<e.length;t++){i[t]=e[t]}return i},inArray:function(e,t){if(t){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(t,e)}for(var i=0,n=t.length;i<n;i++){if(t[i]===e){return i}}}return-1},addI18n:function(e){return p.extend(i,e)},translate:function(e){return i[e]||e},isEmptyObj:function(e){if(e===o)return true;for(var t in e){return false}return true},hasClass:function(e,t){var i;if(e.className==""){return false}i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return i.test(e.className)},addClass:function(e,t){if(!p.hasClass(e,t)){e.className=e.className==""?t:e.className.replace(/\s+$/,"")+" "+t}},removeClass:function(e,t){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,function(e,t,i){return t===" "&&i===" "?" ":""})},getStyle:function(e,t){if(!e)return;if(e.currentStyle){return e.currentStyle[t]}else if(window.getComputedStyle){return window.getComputedStyle(e,null)[t]}},addEvent:function(e,t,i){var n,r,a,s;s=arguments[3];t=t.toLowerCase();if(l===o){l="Plupload_"+p.guid()}if(e.addEventListener){n=i;e.addEventListener(t,n,false)}else if(e.attachEvent){n=function(){var e=window.event;if(!e.target){e.target=e.srcElement}e.preventDefault=u;e.stopPropagation=c;i(e)};e.attachEvent("on"+t,n)}if(e[l]===o){e[l]=p.guid()}if(!f.hasOwnProperty(e[l])){f[e[l]]={}}r=f[e[l]];if(!r.hasOwnProperty(t)){r[t]=[]}r[t].push({func:n,orig:i,key:s})},removeEvent:function(e,t){var i,n,r;if(typeof arguments[2]=="function"){n=arguments[2]}else{r=arguments[2]}t=t.toLowerCase();if(e[l]&&f[e[l]]&&f[e[l]][t]){i=f[e[l]][t]}else{return}for(var a=i.length-1;a>=0;a--){if(i[a].key===r||i[a].orig===n){if(e.removeEventListener){e.removeEventListener(t,i[a].func,false)}else if(e.detachEvent){e.detachEvent("on"+t,i[a].func)}i[a].orig=null;i[a].func=null;i.splice(a,1);if(n!==o){break}}}if(!i.length){delete f[e[l]][t]}if(p.isEmptyObj(f[e[l]])){delete f[e[l]];try{delete e[l]}catch(s){e[l]=o}}},removeAllEvents:function(e){var t=arguments[1];if(e[l]===o||!e[l]){return}p.each(f[e[l]],function(i,n){p.removeEvent(e,n,t)})}};p.Uploader=function(e){var i={},n,r=[],a,f=false;n=new p.QueueProgress;e=p.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},e);function l(){var e,t=0,i;if(this.state==p.STARTED){for(i=0;i<r.length;i++){if(!e&&r[i].status==p.QUEUED){e=r[i];e.status=p.UPLOADING;if(this.trigger("BeforeUpload",e)){this.trigger("UploadFile",e)}}else{t++}}if(t==r.length){this.stop();this.trigger("UploadComplete",r)}}}function u(){var e,t;n.reset();for(e=0;e<r.length;e++){t=r[e];if(t.size!==o){n.size+=t.size;n.loaded+=t.loaded}else{n.size=o}if(t.status==p.DONE){n.uploaded++}else if(t.status==p.FAILED){n.failed++}else{n.queued++}}if(n.size===o){n.percent=r.length>0?Math.ceil(n.uploaded/r.length*100):0}else{n.bytesPerSec=Math.ceil(n.loaded/((+new Date-a||1)/1e3));n.percent=n.size>0?Math.ceil(n.loaded/n.size*100):0}}p.extend(this,{state:p.STOPPED,runtime:"",features:{},files:r,settings:e,total:n,id:p.guid(),init:function(){var i=this,n,f,c,d=0,g;if(typeof e.preinit=="function"){e.preinit(i)}else{p.each(e.preinit,function(e,t){i.bind(t,e)})}e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(e.url)){e.url=e.page_url+e.url}e.chunk_size=p.parseSize(e.chunk_size);e.max_file_size=p.parseSize(e.max_file_size);i.bind("FilesAdded",function(t,n){var a,f,l=0,u,c=e.filters;if(c&&c.length){u=[];p.each(c,function(e){p.each(e.extensions.split(/,/),function(e){if(/^\s*\*\s*$/.test(e)){u.push("\\.*")}else{u.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))}})});u=new RegExp(u.join("|")+"$","i")}for(a=0;a<n.length;a++){f=n[a];f.loaded=0;f.percent=0;f.status=p.QUEUED;if(u&&!u.test(f.name)){t.trigger("Error",{code:p.FILE_EXTENSION_ERROR,message:p.translate("File extension error."),file:f});continue}if(f.size!==o&&e.max_file_size>0&&f.size>e.max_file_size){t.trigger("Error",{code:p.FILE_SIZE_ERROR,message:p.translate("File size error."),file:f});continue}r.push(f);l++}if(l){s(function(){i.trigger("QueueChanged");i.refresh()},1)}else{return false}});if(e.unique_names){i.bind("UploadFile",function(e,t){var i=t.name.match(/\.([^.]+)$/),n="tmp";if(i){n=i[1]}t.target_name=t.id+"."+n})}i.bind("UploadProgress",function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100;u()});i.bind("StateChanged",function(e){if(e.state==p.STARTED){a=+new Date}else if(e.state==p.STOPPED){for(n=e.files.length-1;n>=0;n--){if(e.files[n].status==p.UPLOADING){e.files[n].status=p.QUEUED;u()}}}});i.bind("QueueChanged",u);i.bind("Error",function(e,t){if(t.file){t.file.status=p.FAILED;u();if(e.state==p.STARTED){s(function(){l.call(i)},1)}}});i.bind("FileUploaded",function(e,t){t.status=p.DONE;t.loaded=t.size;e.trigger("UploadProgress",t);s(function(){l.call(i)},1)});if(e.runtimes){f=[];g=e.runtimes.split(/\s?,\s?/);for(n=0;n<g.length;n++){if(t[g[n]]){f.push(t[g[n]])}}}else{f=t}function m(){var e=f[d++],t,n,r;if(e){t=e.getFeatures();n=i.settings.required_features;if(n){n=n.split(",");for(r=0;r<n.length;r++){if(!t[n[r]]){m();return}}}e.init(i,function(n){if(n&&n.success){i.features=t;i.runtime=e.name;i.trigger("Init",{runtime:e.name});i.trigger("PostInit");i.refresh()}else{m()}})}else{i.trigger("Error",{code:p.INIT_ERROR,message:p.translate("Init error.")})}}m();if(typeof e.init=="function"){e.init(i)}else{p.each(e.init,function(e,t){i.bind(t,e)})}},refresh:function(){this.trigger("Refresh")},start:function(){if(r.length&&this.state!=p.STARTED){this.state=p.STARTED;this.trigger("StateChanged");l.call(this)}},stop:function(){if(this.state!=p.STOPPED){this.state=p.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(){f=arguments[0]!==o?arguments[0]:true;this.trigger("DisableBrowse",f)},getFile:function(e){var t;for(t=r.length-1;t>=0;t--){if(r[t].id===e){return r[t]}}},removeFile:function(e){var t;for(t=r.length-1;t>=0;t--){if(r[t].id===e.id){return this.splice(t,1)[0]}}},splice:function(e,t){var i;i=r.splice(e===o?0:e,t===o?r.length:t);this.trigger("FilesRemoved",i);this.trigger("QueueChanged");return i},trigger:function(e){var t=i[e.toLowerCase()],n,r;if(t){r=Array.prototype.slice.call(arguments);r[0]=this;for(n=0;n<t.length;n++){if(t[n].func.apply(t[n].scope,r)===false){return false}}}return true},hasEventListener:function(e){return!!i[e.toLowerCase()]},bind:function(e,t,n){var r;e=e.toLowerCase();r=i[e]||[];r.push({func:t,scope:n||this});i[e]=r},unbind:function(e){e=e.toLowerCase();var t=i[e],n,r=arguments[1];if(t){if(r!==o){for(n=t.length-1;n>=0;n--){if(t[n].func===r){t.splice(n,1);break}}}else{t=[]}if(!t.length){delete i[e]}}},unbindAll:function(){var e=this;p.each(i,function(t,i){e.unbind(i)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};p.File=function(e,t,i){var n=this;n.id=e;n.name=t;n.size=i;n.loaded=0;n.percent=0;n.status=0};p.Runtime=function(){this.getFeatures=function(){};this.init=function(e,t){}};p.QueueProgress=function(){var e=this;e.size=0;e.loaded=0;e.uploaded=0;e.failed=0;e.queued=0;e.percent=0;e.bytesPerSec=0;e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}};p.runtimes={};window.plupload=p})();