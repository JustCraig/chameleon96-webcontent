(function(e){var i,t,o,n=e(window),s={jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert",closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s",hi_menu:"ui-state-default ui-corner-bottom",hi_btn:"ui-state-default ui-corner-all",hi_btnhov:"ui-state-hover",hi_hnd:"ui-icon ui-icon-grip-dotted-horizontal"},bootstrap:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign",closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play",hi_menu:"well",hi_btn:"btn",hi_btnhov:"",hi_hnd:"icon-chevron-down"}};var a=function(){o=e("body");n=e(window);n.bind("resize",function(){if(t)clearTimeout(t);t=setTimeout(e.pnotify_position_all,10)})};if(document.body)a();else e(a);e.extend({pnotify_remove_all:function(){var i=n.data("pnotify");if(i&&i.length){e.each(i,function(){if(this.pnotify_remove)this.pnotify_remove()})}},pnotify_position_all:function(){if(t)clearTimeout(t);t=null;var i=n.data("pnotify");if(!i||!i.length)return;e.each(i,function(){var e=this.opts.stack;if(!e)return;e.nextpos1=e.firstpos1;e.nextpos2=e.firstpos2;e.addpos2=0;e.animation=true});e.each(i,function(){this.pnotify_position()})},pnotify:function(a){var c;var r;if(typeof a!="object"){r=e.extend({},e.pnotify.defaults);r.text=a}else{r=e.extend({},e.pnotify.defaults,a)}for(var f in r){if(typeof f=="string"&&f.match(/^pnotify_/))r[f.replace(/^pnotify_/,"")]=r[f]}if(r.before_init){if(r.before_init(r)===false)return null}var l;var u=function(i,t){h.css("display","none");var o=document.elementFromPoint(i.clientX,i.clientY);h.css("display","block");var n=e(o);var s=n.css("cursor");h.css("cursor",s!="auto"?s:"default");if(!l||l.get(0)!=o){if(l){p.call(l.get(0),"mouseleave",i.originalEvent);p.call(l.get(0),"mouseout",i.originalEvent)}p.call(o,"mouseenter",i.originalEvent);p.call(o,"mouseover",i.originalEvent)}p.call(o,t,i.originalEvent);l=n};var d=s[r.styling];var h=e("<div />",{"class":"ui-pnotify "+r.addclass,css:{display:"none"},mouseenter:function(e){if(r.nonblock)e.stopPropagation();if(r.mouse_reset&&c=="out"){h.stop(true);c="in";h.css("height","auto").animate({width:r.width,opacity:r.nonblock?r.nonblock_opacity:r.opacity},"fast")}if(r.nonblock){h.animate({opacity:r.nonblock_opacity},"fast")}if(r.hide&&r.mouse_reset)h.pnotify_cancel_remove();if(r.sticker&&!r.nonblock)h.sticker.trigger("pnotify_icon").css("visibility","visible");if(r.closer&&!r.nonblock)h.closer.css("visibility","visible")},mouseleave:function(i){if(r.nonblock)i.stopPropagation();l=null;h.css("cursor","auto");if(r.nonblock&&c!="out")h.animate({opacity:r.opacity},"fast");if(r.hide&&r.mouse_reset)h.pnotify_queue_remove();if(r.sticker_hover)h.sticker.css("visibility","hidden");if(r.closer_hover)h.closer.css("visibility","hidden");e.pnotify_position_all()},mouseover:function(e){if(r.nonblock)e.stopPropagation()},mouseout:function(e){if(r.nonblock)e.stopPropagation()},mousemove:function(e){if(r.nonblock){e.stopPropagation();u(e,"onmousemove")}},mousedown:function(e){if(r.nonblock){e.stopPropagation();e.preventDefault();u(e,"onmousedown")}},mouseup:function(e){if(r.nonblock){e.stopPropagation();e.preventDefault();u(e,"onmouseup")}},click:function(e){if(r.nonblock){e.stopPropagation();u(e,"onclick")}},dblclick:function(e){if(r.nonblock){e.stopPropagation();u(e,"ondblclick")}}});h.opts=r;h.container=e("<div />",{"class":d.container+" ui-pnotify-container "+(r.type=="error"?d.error:r.type=="info"?d.info:r.type=="success"?d.success:d.notice)}).appendTo(h);if(r.cornerclass!="")h.container.removeClass("ui-corner-all").addClass(r.cornerclass);if(r.shadow)h.container.addClass("ui-pnotify-shadow");h.pnotify_version="1.2.0";h.pnotify=function(i){var t=r;if(typeof i=="string")r.text=i;else r=e.extend({},r,i);for(var o in r){if(typeof o=="string"&&o.match(/^pnotify_/))r[o.replace(/^pnotify_/,"")]=r[o]}h.opts=r;if(r.cornerclass!=t.cornerclass)h.container.removeClass("ui-corner-all").addClass(r.cornerclass);if(r.shadow!=t.shadow){if(r.shadow)h.container.addClass("ui-pnotify-shadow");else h.container.removeClass("ui-pnotify-shadow")}if(r.addclass===false)h.removeClass(t.addclass);else if(r.addclass!==t.addclass)h.removeClass(t.addclass).addClass(r.addclass);if(r.title===false)h.title_container.slideUp("fast");else if(r.title!==t.title){if(r.title_escape)h.title_container.text(r.title).slideDown(200);else h.title_container.html(r.title).slideDown(200)}if(r.text===false){h.text_container.slideUp("fast")}else if(r.text!==t.text){if(r.text_escape)h.text_container.text(r.text).slideDown(200);else h.text_container.html(r.insert_brs?String(r.text).replace(/\n/g,"<br />"):r.text).slideDown(200)}h.pnotify_history=r.history;h.pnotify_hide=r.hide;if(r.type!=t.type)h.container.removeClass(d.error+" "+d.notice+" "+d.success+" "+d.info).addClass(r.type=="error"?d.error:r.type=="info"?d.info:r.type=="success"?d.success:d.notice);if(r.icon!==t.icon||r.icon===true&&r.type!=t.type){h.container.find("div.ui-pnotify-icon").remove();if(r.icon!==false){e("<div />",{"class":"ui-pnotify-icon"}).append(e("<span />",{"class":r.icon===true?r.type=="error"?d.error_icon:r.type=="info"?d.info_icon:r.type=="success"?d.success_icon:d.notice_icon:r.icon})).prependTo(h.container)}}if(r.width!==t.width)h.animate({width:r.width});if(r.min_height!==t.min_height)h.container.animate({minHeight:r.min_height});if(r.opacity!==t.opacity)h.fadeTo(r.animate_speed,r.opacity);if(!r.closer||r.nonblock)h.closer.css("display","none");else h.closer.css("display","block");if(!r.sticker||r.nonblock)h.sticker.css("display","none");else h.sticker.css("display","block");h.sticker.trigger("pnotify_icon");if(r.sticker_hover)h.sticker.css("visibility","hidden");else if(!r.nonblock)h.sticker.css("visibility","visible");if(r.closer_hover)h.closer.css("visibility","hidden");else if(!r.nonblock)h.closer.css("visibility","visible");if(!r.hide)h.pnotify_cancel_remove();else if(!t.hide)h.pnotify_queue_remove();h.pnotify_queue_position();return h};h.pnotify_position=function(e){var i=h.opts.stack;if(!i)return;if(!i.nextpos1)i.nextpos1=i.firstpos1;if(!i.nextpos2)i.nextpos2=i.firstpos2;if(!i.addpos2)i.addpos2=0;var t=h.css("display")=="none";if(!t||e){var o,s;var a={};var c;switch(i.dir1){case"down":c="top";break;case"up":c="bottom";break;case"left":c="right";break;case"right":c="left";break}o=parseInt(h.css(c));if(isNaN(o))o=0;if(typeof i.firstpos1=="undefined"&&!t){i.firstpos1=o;i.nextpos1=i.firstpos1}var r;switch(i.dir2){case"down":r="top";break;case"up":r="bottom";break;case"left":r="right";break;case"right":r="left";break}s=parseInt(h.css(r));if(isNaN(s))s=0;if(typeof i.firstpos2=="undefined"&&!t){i.firstpos2=s;i.nextpos2=i.firstpos2}if(i.dir1=="down"&&i.nextpos1+h.height()>n.height()||i.dir1=="up"&&i.nextpos1+h.height()>n.height()||i.dir1=="left"&&i.nextpos1+h.width()>n.width()||i.dir1=="right"&&i.nextpos1+h.width()>n.width()){i.nextpos1=i.firstpos1;i.nextpos2+=i.addpos2+(typeof i.spacing2=="undefined"?25:i.spacing2);i.addpos2=0}if(i.animation&&i.nextpos2<s){switch(i.dir2){case"down":a.top=i.nextpos2+"px";break;case"up":a.bottom=i.nextpos2+"px";break;case"left":a.right=i.nextpos2+"px";break;case"right":a.left=i.nextpos2+"px";break}}else h.css(r,i.nextpos2+"px");switch(i.dir2){case"down":case"up":if(h.outerHeight(true)>i.addpos2)i.addpos2=h.height();break;case"left":case"right":if(h.outerWidth(true)>i.addpos2)i.addpos2=h.width();break}if(i.nextpos1){if(i.animation&&(o>i.nextpos1||a.top||a.bottom||a.right||a.left)){switch(i.dir1){case"down":a.top=i.nextpos1+"px";break;case"up":a.bottom=i.nextpos1+"px";break;case"left":a.right=i.nextpos1+"px";break;case"right":a.left=i.nextpos1+"px";break}}else h.css(c,i.nextpos1+"px")}if(a.top||a.bottom||a.right||a.left)h.animate(a,{duration:500,queue:false});switch(i.dir1){case"down":case"up":i.nextpos1+=h.height()+(typeof i.spacing1=="undefined"?25:i.spacing1);break;case"left":case"right":i.nextpos1+=h.width()+(typeof i.spacing1=="undefined"?25:i.spacing1);break}}};h.pnotify_queue_position=function(i){if(t)clearTimeout(t);if(!i)i=10;t=setTimeout(e.pnotify_position_all,i)};h.pnotify_display=function(){if(!h.parent().length)h.appendTo(o);if(r.before_open){if(r.before_open(h)===false)return}if(r.stack.push!="top")h.pnotify_position(true);if(r.animation=="fade"||r.animation.effect_in=="fade"){h.show().fadeTo(0,0).hide()}else{if(r.opacity!=1)h.show().fadeTo(0,r.opacity).hide()}h.animate_in(function(){if(r.after_open)r.after_open(h);h.pnotify_queue_position();if(r.hide)h.pnotify_queue_remove()})};h.pnotify_remove=function(){if(h.timer){window.clearTimeout(h.timer);h.timer=null}if(r.before_close){if(r.before_close(h)===false)return}h.animate_out(function(){if(r.after_close){if(r.after_close(h)===false)return}h.pnotify_queue_position();if(r.remove)h.detach()})};h.animate_in=function(e){c="in";var i;if(typeof r.animation.effect_in!="undefined")i=r.animation.effect_in;else i=r.animation;if(i=="none"){h.show();e()}else if(i=="show")h.show(r.animate_speed,e);else if(i=="fade")h.show().fadeTo(r.animate_speed,r.opacity,e);else if(i=="slide")h.slideDown(r.animate_speed,e);else if(typeof i=="function")i("in",e,h);else h.show(i,typeof r.animation.options_in=="object"?r.animation.options_in:{},r.animate_speed,e)};h.animate_out=function(e){c="out";var i;if(typeof r.animation.effect_out!="undefined")i=r.animation.effect_out;else i=r.animation;if(i=="none"){h.hide();e()}else if(i=="show")h.hide(r.animate_speed,e);else if(i=="fade")h.fadeOut(r.animate_speed,e);else if(i=="slide")h.slideUp(r.animate_speed,e);else if(typeof i=="function")i("out",e,h);else h.hide(i,typeof r.animation.options_out=="object"?r.animation.options_out:{},r.animate_speed,e)};h.pnotify_cancel_remove=function(){if(h.timer)window.clearTimeout(h.timer)};h.pnotify_queue_remove=function(){h.pnotify_cancel_remove();h.timer=window.setTimeout(function(){h.pnotify_remove()},isNaN(r.delay)?0:r.delay)};h.closer=e("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:r.closer_hover?"hidden":"visible"},click:function(){h.pnotify_remove();h.sticker.css("visibility","hidden");h.closer.css("visibility","hidden")}}).append(e("<span />",{"class":d.closer})).appendTo(h.container);if(!r.closer||r.nonblock)h.closer.css("display","none");h.sticker=e("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:r.sticker_hover?"hidden":"visible"},click:function(){r.hide=!r.hide;if(r.hide)h.pnotify_queue_remove();else h.pnotify_cancel_remove();e(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){e(this).children().removeClass(d.pin_up+" "+d.pin_down).addClass(r.hide?d.pin_up:d.pin_down)}).append(e("<span />",{"class":d.pin_up})).appendTo(h.container);if(!r.sticker||r.nonblock)h.sticker.css("display","none");if(r.icon!==false){e("<div />",{"class":"ui-pnotify-icon"}).append(e("<span />",{"class":r.icon===true?r.type=="error"?d.error_icon:r.type=="info"?d.info_icon:r.type=="success"?d.success_icon:d.notice_icon:r.icon})).prependTo(h.container)}h.title_container=e("<h4 />",{"class":"ui-pnotify-title"}).appendTo(h.container);if(r.title===false)h.title_container.hide();else if(r.title_escape)h.title_container.text(r.title);else h.title_container.html(r.title);h.text_container=e("<div />",{"class":"ui-pnotify-text"}).appendTo(h.container);if(r.text===false)h.text_container.hide();else if(r.text_escape)h.text_container.text(r.text);else h.text_container.html(r.insert_brs?String(r.text).replace(/\n/g,"<br />"):r.text);if(typeof r.width=="string")h.css("width",r.width);if(typeof r.min_height=="string")h.container.css("min-height",r.min_height);h.pnotify_history=r.history;h.pnotify_hide=r.hide;var _=n.data("pnotify");if(_==null||typeof _!="object")_=[];if(r.stack.push=="top")_=e.merge([h],_);else _=e.merge(_,[h]);n.data("pnotify",_);if(r.stack.push=="top")h.pnotify_queue_position(1);if(r.after_init)r.after_init(h);if(r.history){var y=n.data("pnotify_history");if(typeof y=="undefined"){y=e("<div />",{"class":"ui-pnotify-history-container "+d.hi_menu,mouseleave:function(){y.animate({top:"-"+i+"px"},{duration:100,queue:false})}}).append(e("<div />",{"class":"ui-pnotify-history-header",text:"Redisplay"})).append(e("<button />",{"class":"ui-pnotify-history-all "+d.hi_btn,text:"All",mouseenter:function(){e(this).addClass(d.hi_btnhov)},mouseleave:function(){e(this).removeClass(d.hi_btnhov)},click:function(){e.each(_,function(){if(this.pnotify_history){if(this.is(":visible")){if(this.pnotify_hide)this.pnotify_queue_remove()}else if(this.pnotify_display)this.pnotify_display()}});return false}})).append(e("<button />",{"class":"ui-pnotify-history-last "+d.hi_btn,text:"Last",mouseenter:function(){e(this).addClass(d.hi_btnhov)},mouseleave:function(){e(this).removeClass(d.hi_btnhov)},click:function(){var e=-1;var i;do{if(e==-1)i=_.slice(e);else i=_.slice(e,e+1);if(!i[0])break;e--}while(!i[0].pnotify_history||i[0].is(":visible"));if(!i[0])return false;if(i[0].pnotify_display)i[0].pnotify_display();return false}})).appendTo(o);var m=e("<span />",{"class":"ui-pnotify-history-pulldown "+d.hi_hnd,mouseenter:function(){y.animate({top:"0"},{duration:100,queue:false})}}).appendTo(y);i=m.offset().top+2;y.css({top:"-"+i+"px"});n.data("pnotify_history",y)}}r.stack.animation=false;h.pnotify_display();return h}});var c=/^on/,r=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,f=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,l=/^(scroll|resize|(un)?load|abort|error)$/;var p=function(i,t){var o;i=i.toLowerCase();if(document.createEvent&&this.dispatchEvent){i=i.replace(c,"");if(i.match(r)){e(this).offset();o=document.createEvent("MouseEvents");o.initMouseEvent(i,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}else if(i.match(f)){o=document.createEvent("UIEvents");o.initUIEvent(i,t.bubbles,t.cancelable,t.view,t.detail)}else if(i.match(l)){o=document.createEvent("HTMLEvents");o.initEvent(i,t.bubbles,t.cancelable)}if(!o)return;this.dispatchEvent(o)}else{if(!i.match(c))i="on"+i;o=document.createEventObject(t);this.fireEvent(i,o)}};e.pnotify.defaults={title:false,title_escape:false,text:false,text_escape:false,styling:"jqueryui",addclass:"",cornerclass:"",nonblock:false,nonblock_opacity:.2,history:false,width:"300px",min_height:"16px",type:"notice",icon:true,animation:"fade",animate_speed:"slow",opacity:1,shadow:true,closer:true,closer_hover:true,sticker:true,sticker_hover:true,hide:true,delay:8e3,mouse_reset:true,remove:true,insert_brs:true,stack:{dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25}}})(jQuery);