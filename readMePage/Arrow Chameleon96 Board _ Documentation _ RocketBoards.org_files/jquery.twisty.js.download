var foswiki;if(!foswiki)foswiki={};(function(i){foswiki.TwistyPlugin=new function(){var t=this;this._getName=function(i){var t=new RegExp("(.*)(hide|show|toggle)","g");var s=t.exec(i);var e=s&&s[1]?s[1]:"";return e};this._getType=function(i){var t=new RegExp("(.*)(hide|show|toggle)","g");var s=t.exec(i);var e=s&&s[2]?s[2]:"";return e};this._toggleTwisty=function(i){if(!i)return;i.state=i.state==foswiki.TwistyPlugin.CONTENT_HIDDEN?foswiki.TwistyPlugin.CONTENT_SHOWN:foswiki.TwistyPlugin.CONTENT_HIDDEN;t._update(i,true)};this._update=function(t,s){var e=t.show;var n=t.hide;var o=t.toggle;if(t.state==foswiki.TwistyPlugin.CONTENT_SHOWN){if(s&&t.speed!=0){foswiki.TwistyPlugin.showAnimation(o,t)}else{foswiki.TwistyPlugin.show(o,t)}i(e).hide();i(n).show()}else{if(s&&t.speed!=0){foswiki.TwistyPlugin.hideAnimation(o,t)}else{foswiki.TwistyPlugin.hide(o,t)}i(e).show();i(n).hide()}if(s&&t.saveSetting){foswiki.Pref.setPref(foswiki.TwistyPlugin.COOKIE_PREFIX+t.name,t.state)}if(t.clearSetting){if(foswiki.Pref.clearPref){foswiki.Pref.clearPref(foswiki.TwistyPlugin.COOKIE_PREFIX+t.name)}else{foswiki.Pref.setPref(foswiki.TwistyPlugin.COOKIE_PREFIX+t.name,"")}}};this._register=function(s){if(!s)return;var e=t._getName(s.id);var n=t._storage[e];if(!n){n=new foswiki.TwistyPlugin.Storage}if(i(s).hasClass("twistyRememberSetting"))n.saveSetting=true;if(i(s).hasClass("twistyForgetSetting"))n.clearSetting=true;if(i(s).hasClass("twistyStartShow"))n.startShown=true;if(i(s).hasClass("twistyStartHide"))n.startHidden=true;if(i(s).hasClass("twistyFirstStartShow"))n.firstStartShown=true;if(i(s).hasClass("twistyFirstStartHide"))n.firstStartHidden=true;n.name=e;var o=t._getType(s.id);n[o]=s;t._storage[e]=n;switch(o){case"show":case"hide":s.onclick=function(){t._toggleTwisty(n);return false};break}return n};this._storage={}};foswiki.TwistyPlugin.show=function(t,s){i(t).show()};foswiki.TwistyPlugin.hide=function(t,s){i(t).hide()};foswiki.TwistyPlugin.showAnimation=function(t,s){i(t).animate({height:"show",opacity:"show"},s.speed)};foswiki.TwistyPlugin.hideAnimation=function(t,s){i(t).animate({height:"hide",opacity:"hide"},s.speed)};foswiki.TwistyPlugin.CONTENT_HIDDEN=0;foswiki.TwistyPlugin.CONTENT_SHOWN=1;foswiki.TwistyPlugin.COOKIE_PREFIX="TwistyPlugin_";foswiki.TwistyPlugin.prefList;foswiki.TwistyPlugin.init=function(t){if(!t)return;var s=this._getName(t.id);var e=this._storage[s];if(e&&e.show&&e.hide&&e.toggle)return e;e=this._register(t);if(e.show&&e.hide&&e.toggle){if(i(t).hasClass("twistyInited1")){e.state=foswiki.TwistyPlugin.CONTENT_SHOWN;this._update(e,false);return e}if(i(t).hasClass("twistyInited0")){e.state=foswiki.TwistyPlugin.CONTENT_HIDDEN;this._update(e,false);return e}if(foswiki.TwistyPlugin.prefList==null){foswiki.TwistyPlugin.prefList=foswiki.Pref.getPrefList()}var n=foswiki.Pref.getPrefValueFromPrefList(foswiki.TwistyPlugin.COOKIE_PREFIX+e.name,foswiki.TwistyPlugin.prefList);if(e.firstStartHidden)e.state=foswiki.TwistyPlugin.CONTENT_HIDDEN;if(e.firstStartShown)e.state=foswiki.TwistyPlugin.CONTENT_SHOWN;if(n&&n=="0")e.state=foswiki.TwistyPlugin.CONTENT_HIDDEN;if(n&&n=="1")e.state=foswiki.TwistyPlugin.CONTENT_SHOWN;if(e.startHidden)e.state=foswiki.TwistyPlugin.CONTENT_HIDDEN;if(e.startShown)e.state=foswiki.TwistyPlugin.CONTENT_SHOWN;this._update(e,false)}return e};foswiki.TwistyPlugin.toggleAll=function(i){for(var t in this._storage){var s=this._storage[t];s.state=i;this._update(s,true)}};foswiki.TwistyPlugin.Storage=function(){this.name;this.state=foswiki.TwistyPlugin.CONTENT_HIDDEN;this.hide;this.show;this.toggle;this.saveSetting=false;this.clearSetting=false;this.startShown;this.startHidden;this.firstStartShown;this.firstStartHidden;this.marginTop;this.marginBottom;this.paddingTop;this.paddingBottom;this.speed};i(function(){i(".twistyStartHide").livequery(function(){i(this).hide()});i(".foswikiMakeVisible").livequery(function(){i(this).removeClass("foswikiMakeVisible")});i(".twistyContent").livequery(function(){var t=foswiki.TwistyPlugin.init(this),s=i(this),e;if(s.get(0).tagName=="SPAN"){e=0}else{e=200}t.speed=e});i(".twistyTrigger").livequery(function(){foswiki.TwistyPlugin.init(this)});i(document).on("click",".twistyExpandAll",function(){foswiki.TwistyPlugin.toggleAll(foswiki.TwistyPlugin.CONTENT_SHOWN)});i(document).on("click",".twistyCollapseAll",function(){foswiki.TwistyPlugin.toggleAll(foswiki.TwistyPlugin.CONTENT_HIDDEN)})})})(jQuery);